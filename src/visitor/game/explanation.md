# Разница между обычным Visitor и Acyclic Visitor

**Проблема обычного Visitor (классическая реализация):**
- Жёсткая связь: интерфейс Visitor содержит методы `visit()` для всех типов объектов
- При добавлении нового типа нужно менять все существующие Visitor'ы
- Нарушает **принцип открытости/закрытости** (OCP)



**Решение через Acyclic Visitor:**
- Использует **цепочку интерфейсов** для каждого типа
- Не требует изменения существующих Visitor'ов при добавлении новых типов
- Позволяет избежать циклических зависимостей




### **Ключевые отличия**

| Критерий               | Классический Visitor         | Acyclic Visitor              |
|------------------------|-----------------------------|-----------------------------|
| **Связность**          | Жёсткая связь с типами      | Слабая связь через интерфейсы |
| **Расширяемость**      | Требует изменения Visitor'ов | Новые Visitor'ы без изменений |
| **Циклические зависимости** | Есть                      | Нет                         |
| **Типобезопасность**   | Проверяется на этапе компиляции | Требует проверки `instanceof` |
| **Сложность**          | Проще                      | Сложнее за счёт проверок     |

---

### **Когда использовать?**

- **Обычный Visitor**:
    - Когда типы объектов стабильны и редко меняются
    - Нужна максимальная производительность

- **Acyclic Visitor**:
    - В плагинных архитектурах
    - Когда новые типы объектов добавляются часто
    - Важна гибкость и минимальная связность

---


В классическом Visitor пришлось бы изменять все существующие Visitor'ы.